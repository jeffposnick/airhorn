!function(){"use strict";var n=function(){var n,t,o=new(window.AudioContext||window.webkitAudioContext),e=this,s=function(n){n=n||function(){},1==!!t&&n(t);var e=new XMLHttpRequest;e.onload=function(){o.decodeAudioData(e.response,function(t){n(t)})},e.open("GET","sounds/airhorn.mp3"),e.responseType="arraybuffer",e.send()};this.start=function(t){var i=t.loop;s(function(t){n=o.createBufferSource(),n.connect(o.destination),n.buffer=t,n.onended=function(){e.stop()},n.start(0),n.loop=i,n.loopStart=.24,n.loopEnd=.34})},this.stop=function(){n.loop=!1,this.onstopped()},this.onstopped=function(){};var i=function(){s(function(n){t=n})};i()},t=function(t){var o=t.querySelector(".horn"),e=new n,s=function(n){return 1==!!n&&(n.preventDefault(),n.touches&&n.touches.length>1)?!1:void e.start({loop:!1})},i=function(n){1==!!n&&n.preventDefault(),e.stop()};this.start=function(n){o.classList.add("horning"),e.start(n),e.onstopped=function(){o.classList.remove("horning")},ga("send","event","horn","play")},this.stop=function(){o.classList.remove("horning"),e.stop()},o.addEventListener("mousedown",s),o.addEventListener("touchstart",s),document.documentElement.addEventListener("mouseup",i),document.documentElement.addEventListener("touchend",i)};window.addEventListener("load",function(){var n=document.getElementById("airhorn"),o=new t(n);"#instant"==location.hash&&o.start({loop:!1})})}();